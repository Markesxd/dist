"use strict";(self.webpackChunktpwp=self.webpackChunktpwp||[]).push([[85],{4085:(Z,d,i)=>{i.r(d),i.d(d,{SandboxesComponent:()=>_});var l=i(6814),p=i(4144),c=i(2746),a=i(95),t=i(9468);let h=(()=>{class n{constructor(e,o){this.activeModal=e,this.fb=o,this.form=this.fb.group({name:["",[a.kI.required]]})}save(){this.activeModal.close(this.createFromForm())}createFromForm(){const e={};return e.nome=this.form.get("name")?.value??"",e.limpoEm=new Date,e}dismiss(){this.activeModal.dismiss()}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(c.Kz),t.Y36(a.qu))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-modal-sandbox"]],standalone:!0,features:[t.jDz],decls:12,vars:2,consts:[[1,"p-3"],[1,"form-header"],[1,"form-title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 384 512",1,"form-icon",3,"click"],["d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"],[3,"formGroup"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["type","button",1,"form-buttom",3,"disabled","click"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3,"Nova Caixa"),t.qZA(),t.O4$(),t.TgZ(4,"svg",3),t.NdJ("click",function(){return s.dismiss()}),t._UZ(5,"path",4),t.qZA()(),t.kcU(),t.TgZ(6,"form",5)(7,"label",6),t._uU(8,"Nome"),t.qZA(),t._UZ(9,"input",7),t.TgZ(10,"button",8),t.NdJ("click",function(){return s.save()}),t._uU(11,"Cadastrar"),t.qZA()()()),2&o&&(t.xp6(6),t.Q6J("formGroup",s.form),t.xp6(4),t.Q6J("disabled",!s.form.valid))},dependencies:[l.ez,c.IJ,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]})}return n})();var u=i(6933),v=i(553),f=i(9862);let g=(()=>{class n{constructor(e){this.http=e,this.baseUrl=v.N.apiUrl+"/caixa-de-areia"}create(e){return this.http.post(this.baseUrl,e)}delete(e){return this.http.delete(`${this.baseUrl}/${e}`)}patch(e){return this.http.put(`${this.baseUrl}/${e.id}`,e)}fetch(){return this.http.get(this.baseUrl)}static#t=this.\u0275fac=function(o){return new(o||n)(t.LFG(f.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function b(n,m){if(1&n){const e=t.EpF();t.TgZ(0,"div",11),t._uU(1),t.ALo(2,"formatDate"),t.TgZ(3,"div",12),t.O4$(),t.TgZ(4,"svg",13),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw();return t.KtG(r.deleteBox(s))}),t._UZ(5,"path",14),t.qZA(),t.TgZ(6,"svg",13),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw();return t.KtG(r.cleanBox(s))}),t._UZ(7,"path",15),t.qZA()()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.limpoEm)," ")}}function x(n,m){if(1&n&&(t.TgZ(0,"div",6)(1,"h2",7)(2,"button",8),t._uU(3),t.qZA()(),t.TgZ(4,"div",9)(5,"div",10),t.YNc(6,b,8,3,"ng-template"),t.qZA()()()),2&n){const e=m.$implicit;t.xp6(3),t.Oqu(e.nome)}}let _=(()=>{class n{constructor(e,o){this.modalService=e,this.sandboxService=o}ngOnInit(){this.load()}openModal(){this.modalService.open(h,{centered:!0}).closed.subscribe(o=>{this.sandboxService.create(o).subscribe(()=>this.load())})}cleanBox(e){e.limpoEm=new Date,this.sandboxService.patch(e).subscribe(()=>{e.limpoEm=new Date})}deleteBox(e){const o=this.modalService.open(u.Y,{centered:!0});o.componentInstance.text="Voc\xea tem certeza que deseja excluir essa caixa de areia?",o.closed.subscribe(()=>{if(!e.id)throw new Error("Sandbox missing id");this.sandboxService.delete(e.id).subscribe(()=>this.load())})}load(){this.sandboxService.fetch().subscribe(e=>{this.sandboxes=e})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(c.FF),t.Y36(g))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-sandboxes"]],standalone:!0,features:[t.jDz],decls:8,vars:2,consts:[[1,"page-header"],[1,"page-title"],["xmlns","http://www.w3.org/2000/svg","height","1em","viewBox","0 0 512 512",3,"click"],["d","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"],["ngbAccordion","",3,"closeOthers"],["ngbAccordionItem","",4,"ngFor","ngForOf"],["ngbAccordionItem",""],["ngbAccordionHeader",""],["ngbAccordionButton",""],["ngbAccordionCollapse",""],["ngbAccordionBody",""],[1,"d-flex","justify-content-between"],[1,"d-flex","gap-3"],["xmlns","http://www.w3.org/2000/svg","height","1em","viewBox","0 0 448 512",3,"click"],["d","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"],["d","M128 32v96H256V96h60.1c4.2 0 8.3 1.7 11.3 4.7l33.9 33.9c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L372.7 55.4c-15-15-35.4-23.4-56.6-23.4H256c0-17.7-14.3-32-32-32H160c-17.7 0-32 14.3-32 32zM117.4 160c-33.3 0-61 25.5-63.8 58.7L35 442.7C31.9 480 61.3 512 98.8 512H285.2c37.4 0 66.9-32 63.8-69.3l-18.7-224c-2.8-33.2-30.5-58.7-63.8-58.7H117.4zM256 360c0 35.3-28.7 56-64 56s-64-20.7-64-56c0-32.5 37-80.9 50.9-97.9c3.2-3.9 8.1-6.1 13.1-6.1s9.9 2.2 13.1 6.1C219 279.1 256 327.5 256 360z"]],template:function(o,s){1&o&&(t.TgZ(0,"section")(1,"div",0)(2,"h2",1),t._uU(3,"Caixas"),t.qZA(),t.O4$(),t.TgZ(4,"svg",2),t.NdJ("click",function(){return s.openModal()}),t._UZ(5,"path",3),t.qZA()(),t.kcU(),t.TgZ(6,"div",4),t.YNc(7,x,7,1,"div",5),t.qZA()()),2&o&&(t.xp6(6),t.Q6J("closeOthers",!0),t.xp6(1),t.Q6J("ngForOf",s.sandboxes))},dependencies:[l.ez,l.sg,p.r,c.IJ,c.fD,c.QQ,c.VE,c.I,c.fA,c.ud]})}return n})()}}]);