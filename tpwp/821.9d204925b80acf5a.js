"use strict";(self.webpackChunktpwp=self.webpackChunktpwp||[]).push([[821],{5821:(O,u,l)=>{l.r(u),l.d(u,{CatsPageComponent:()=>k});var d=l(6814),a=l(2746),t=l(9468),c=l(95),m=function(r){return r[r.FEMALE=0]="FEMALE",r[r.MALE=1]="MALE",r}(m||{}),p=l(6933);function _(r,s){if(1&r){const e=t.EpF();t.O4$(),t.TgZ(0,"svg",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onDelete())}),t._UZ(1,"path",20),t.qZA()}}let h=(()=>{class r{constructor(e,n,o){this.fb=e,this.activeModal=n,this.modalService=o,this.isNew=!0,this.delete=new t.vpe,this.editForm=this.fb.group({name:["",[c.kI.required]],birthday:"",gender:0})}onSubmit(){this.activeModal.close(this.createFromForm())}onDelete(){const e=this.modalService.open(p.Y,{centered:!0});e.componentInstance.text="Voc\xea tem certeza que deseja excluir este gato?",e.closed.subscribe(()=>{this.delete.emit()}),this.activeModal.dismiss()}createFromForm(){const e={};return e.nome=this.editForm.get("name")?.value??"",e.aniversario=new Date(this.editForm.get("birthday")?.value??""),e.sexo=Number(this.editForm.get("gender")?.value??0),e}dismiss(){this.activeModal.dismiss()}loadDate(e){const n=document.querySelector("#birthday");setTimeout(()=>{n&&(n.value=e.split("T")[0])},200)}loadGender(e){const o=document.querySelector("#gender"+(e===m.MALE?"M":"F"));setTimeout(()=>{o.checked=!0},200)}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(c.qu),t.Y36(a.Kz),t.Y36(a.FF))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-create-cat"]],outputs:{delete:"delete"},standalone:!0,features:[t.jDz],decls:30,vars:5,consts:[[1,"p-3"],[1,"form-header"],[1,"form-title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 384 512",1,"form-icon",3,"click"],["d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"],[1,"d-flex","flex-column","gap-3",3,"formGroup","ngSubmit"],["for","name",1,"form-label"],[1,"d-flex","align-items-center","gap-2"],["type","text","id","name","formControlName","name",1,"form-control"],["xmlns","http://www.w3.org/2000/svg","height","1em","viewBox","0 0 448 512",3,"click",4,"ngIf"],["for","birthday",1,"form-label"],["type","date","id","birthday","formControlName","birthday",1,"form-control"],[1,"form-label"],[1,"form-check"],["type","radio","formControlName","gender","id","genderM","value","1",1,"form-check-input"],["for","genderM",1,"form-check-label","mt-1"],["type","radio","formControlName","gender","id","genderF","value","0",1,"form-check-input"],["for","genderF",1,"form-check-label","mt-1"],["type","submit",1,"form-buttom",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","height","1em","viewBox","0 0 448 512",3,"click"],["d","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3),t.qZA(),t.O4$(),t.TgZ(4,"svg",3),t.NdJ("click",function(){return o.dismiss()}),t._UZ(5,"path",4),t.qZA()(),t.kcU(),t.TgZ(6,"form",5),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(7,"div")(8,"label",6),t._uU(9,"Nome"),t.qZA(),t.TgZ(10,"div",7),t._UZ(11,"input",8),t.YNc(12,_,2,0,"svg",9),t.qZA()(),t.TgZ(13,"div")(14,"label",10),t._uU(15,"Nascimento"),t.qZA(),t._UZ(16,"input",11),t.qZA(),t.TgZ(17,"div")(18,"label",12),t._uU(19,"Sexo"),t.qZA(),t.TgZ(20,"div",13),t._UZ(21,"input",14),t.TgZ(22,"label",15),t._uU(23,"Macho"),t.qZA()(),t.TgZ(24,"div",13),t._UZ(25,"input",16),t.TgZ(26,"label",17),t._uU(27,"F\xeamea"),t.qZA()()(),t.TgZ(28,"button",18),t._uU(29),t.qZA()()()),2&n&&(t.xp6(3),t.hij("",o.isNew?"Novo":""," Gato"),t.xp6(3),t.Q6J("formGroup",o.editForm),t.xp6(6),t.Q6J("ngIf",!o.isNew),t.xp6(16),t.Q6J("disabled",!o.editForm.valid),t.xp6(1),t.Oqu(o.isNew?"Cadastrar":"Salvar"))},dependencies:[d.ez,d.O5,c.UX,c._Y,c.Fj,c._,c.JJ,c.JL,c.sg,c.u]})}return r})();var f=l(2187),v=l(2017);const C=["carousel"];function b(r,s){1&r&&(t.ynx(0),t.O4$(),t.TgZ(1,"svg",29),t._UZ(2,"path",30),t.qZA(),t.BQk())}function x(r,s){1&r&&(t.O4$(),t.TgZ(0,"svg",31),t._UZ(1,"path",32),t.qZA())}function w(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){const i=t.CHM(e).$implicit,g=t.oxw(2).$implicit,N=t.oxw(2);return t.KtG(N.setPlan(i,g))}),t._uU(1),t.qZA()}if(2&r){const e=s.$implicit;t.xp6(1),t.Oqu(e.nome)}}function Z(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",16)(1,"div",17)(2,"div",18)(3,"h3",19),t._uU(4),t.qZA(),t.TgZ(5,"span",20),t._uU(6),t.qZA(),t.YNc(7,b,3,0,"ng-container",21),t.YNc(8,x,2,0,"ng-template",null,22,t.W1O),t.qZA(),t.O4$(),t.TgZ(10,"svg",2),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.openModal(o))}),t._UZ(11,"path",23),t.qZA()(),t.kcU(),t.TgZ(12,"div",24)(13,"div")(14,"span",25),t._uU(15),t.qZA()(),t.TgZ(16,"div",26),t.YNc(17,w,2,1,"button",27),t.qZA()(),t._UZ(18,"img",28),t.qZA()}if(2&r){const e=t.MAs(9),n=t.oxw().$implicit,o=t.oxw(2);let i;t.xp6(4),t.Oqu(n.nome),t.xp6(2),t.Oqu(o.getCatAge(n)),t.xp6(1),t.Q6J("ngIf",1===n.sexo)("ngIfElse",e),t.xp6(8),t.hij(" ",null!==(i=null==n.planoAlimentar?null:n.planoAlimentar.nome)&&void 0!==i?i:"---"," "),t.xp6(2),t.Q6J("ngForOf",o.getOtherPlans(n)),t.xp6(1),t.MGl("alt","foto de ",n.nome,"")}}function T(r,s){1&r&&t.YNc(0,Z,19,7,"ng-template",15)}function M(r,s){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"span",34),t.NdJ("click",function(){const i=t.CHM(e).index,g=t.oxw(2);return t.KtG(g.currentCard=i)}),t.qZA(),t.BQk()}if(2&r){const e=s.index,n=t.oxw(2);t.xp6(1),t.Gre("bubble ",e===n.currentCard?"active":"","")}}function A(r,s){if(1&r){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",6),t.NdJ("touchstart",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.onTouchStart(o))})("touchend",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.onTouchEnd(o))}),t.TgZ(1,"ngb-carousel",7,8),t.NdJ("slide",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.updateBubble(o))}),t.YNc(3,T,1,0,null,9),t.qZA(),t.TgZ(4,"span",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onPreviousCard())}),t.O4$(),t.TgZ(5,"svg",11),t._UZ(6,"path",12),t.qZA()(),t.kcU(),t.TgZ(7,"span",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onNextCard())}),t.O4$(),t.TgZ(8,"svg",11),t._UZ(9,"path",12),t.qZA()(),t.kcU(),t.TgZ(10,"div",14),t.YNc(11,M,2,3,"ng-container",9),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("wrap",!1)("showNavigationArrows",!1)("interval",0),t.xp6(2),t.Q6J("ngForOf",e.pets),t.xp6(8),t.Q6J("ngForOf",e.pets)}}function P(r,s){1&r&&(t.O4$(),t.kcU(),t.TgZ(0,"div",35)(1,"h3",36),t._uU(2,"N\xe3o H\xe1 Gatos Cadastrados!"),t.qZA()())}let k=(()=>{class r{constructor(e,n,o){this.catService=e,this.planService=n,this.modalService=o,this.pets=[],this.plans=[],this.touchStartX=null,this._currentCard=0}ngOnInit(){this.load()}onTouchStart(e){this.touchStartX=e.changedTouches[0].clientX}onTouchEnd(e){if(null===this.touchStartX)return;const n=e.changedTouches[0].clientX-this.touchStartX;Math.abs(n)<10||(n<0?this.onNextCard():this.onPreviousCard())}onNextCard(){this.currentCard++,this.carousel.next()}onPreviousCard(){this.currentCard--,this.carousel.prev()}updateBubble(e){this.currentCard=Number(e.current.split("-")[2])}openModal(e){const n=this.modalService.open(h);if(e)return n.componentInstance.isNew=!1,n.componentInstance.editForm.patchValue({name:e.nome,birthday:e.aniversario}),n.componentInstance.loadDate(e.aniversario),n.componentInstance.loadGender(e.sexo),n.closed.subscribe(o=>{o.id=e.id,this.catService.put(o).subscribe(()=>this.load())}),void n.componentInstance.delete.subscribe(()=>{this.catService.delete(e).subscribe(()=>this.load())});n.closed.subscribe(o=>{this.catService.post(o).subscribe(i=>{i.ok&&this.load()})})}set currentCard(e){e<0||e>this.pets.length-1||(this._currentCard=e)}get currentCard(){return this._currentCard}get hasCats(){return 0!==this.pets.length}getOtherPlans(e){if(!this.plans)throw new Error;return this.plans.filter(n=>n.id!==e.planoAlimentar?.id)}getCatAge(e){if(!e.aniversario)return"";const n=new Date,o=new Date(e.aniversario),i=n.getTime()-o.getTime();return`${Math.floor(i/31536e6)} anos`}setPlan(e,n){if(!e.gatos)throw new Error("plan.gatos is undefined");e.gatos.find(i=>n.id===i.id)||(e.gatos.push(n),this.planService.put(e).subscribe(i=>{n.planoAlimentar=i}))}load(){this.catService.get().subscribe(e=>{this.pets=e.body}),this.planService.fetch().subscribe(e=>{this.plans=e})}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(f.q),t.Y36(v.D),t.Y36(a.FF))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["cats-page"]],viewQuery:function(n,o){if(1&n&&t.Gf(C,5),2&n){let i;t.iGM(i=t.CRH())&&(o.carousel=i.first)}},standalone:!0,features:[t.jDz],decls:8,vars:2,consts:[[1,"page-header"],[1,"page-title"],["xmlns","http://www.w3.org/2000/svg","height","1em","viewBox","0 0 512 512",3,"click"],["d","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"],["class","cats-page-content",3,"touchstart","touchend",4,"ngIf","ngIfElse"],["noCat",""],[1,"cats-page-content",3,"touchstart","touchend"],[1,"cards","mt-5",3,"wrap","showNavigationArrows","interval","slide"],["carousel",""],[4,"ngFor","ngForOf"],[1,"arrow-left",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","1em","viewBox","0 0 320 512"],["d","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"],[1,"arrow-right",3,"click"],[1,"bubbles"],["ngbSlide",""],[1,"card"],[1,"card--header","mb-1"],[1,"d-flex","gap-2"],[1,"card-title"],[1,"card-faded-text"],[4,"ngIf","ngIfElse"],["female",""],["d","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"],["ngbDropdown","",1,"card-faded-text","card-sub"],["ngbDropdownToggle",""],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["src","","onerror","this.onerror=null; this.src='../../assets/cat-icon.svg' ",1,"card-img",3,"alt"],["xmlns","http://www.w3.org/2000/svg","height","1em","viewBox","0 0 448 512"],["d","M289.8 46.8c3.7-9 12.5-14.8 22.2-14.8H424c13.3 0 24 10.7 24 24V168c0 9.7-5.8 18.5-14.8 22.2s-19.3 1.7-26.2-5.2l-33.4-33.4L321 204.2c19.5 28.4 31 62.7 31 99.8c0 97.2-78.8 176-176 176S0 401.2 0 304s78.8-176 176-176c37 0 71.4 11.4 99.8 31l52.6-52.6L295 73c-6.9-6.9-8.9-17.2-5.2-26.2zM400 80l0 0h0v0zM176 416a112 112 0 1 0 0-224 112 112 0 1 0 0 224z"],["xmlns","http://www.w3.org/2000/svg","height","1em","viewBox","0 0 384 512"],["d","M80 176a112 112 0 1 1 224 0A112 112 0 1 1 80 176zM224 349.1c81.9-15 144-86.8 144-173.1C368 78.8 289.2 0 192 0S16 78.8 16 176c0 86.3 62.1 158.1 144 173.1V384H128c-17.7 0-32 14.3-32 32s14.3 32 32 32h32v32c0 17.7 14.3 32 32 32s32-14.3 32-32V448h32c17.7 0 32-14.3 32-32s-14.3-32-32-32H224V349.1z"],["ngbDropdownItem","",3,"click"],[3,"click"],[1,"cats-page-contet"],[1,"loose-title"]],template:function(n,o){if(1&n&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Meus Gatos"),t.qZA(),t.O4$(),t.TgZ(3,"svg",2),t.NdJ("click",function(){return o.openModal()}),t._UZ(4,"path",3),t.qZA()(),t.YNc(5,A,12,5,"div",4),t.YNc(6,P,3,0,"ng-template",null,5,t.W1O)),2&n){const i=t.MAs(7);t.xp6(5),t.Q6J("ngIf",o.hasCats)("ngIfElse",i)}},dependencies:[d.ez,d.sg,d.O5,a.IJ,a.uo,a.xl,a.jt,a.iD,a.Vi,a.TH],styles:[".cards[_ngcontent-%COMP%]{overflow:hidden}.card[_ngcontent-%COMP%]{width:70vw;display:flex;margin:2rem auto;flex-direction:column;align-items:center;border:1px solid black;border-radius:1rem}.card--header[_ngcontent-%COMP%]{width:80%;margin-top:1rem;display:flex;justify-content:space-between}.card-sub[_ngcontent-%COMP%]{width:80%;align-self:center}.card-title[_ngcontent-%COMP%]{display:inline;margin:0;font-size:1rem}.card-faded-text[_ngcontent-%COMP%]{color:#989898;font-size:.9rem}.card-img[_ngcontent-%COMP%]{margin:2rem;width:50%}.cats-page-content[_ngcontent-%COMP%]{position:relative;width:100%}.loose-title[_ngcontent-%COMP%]{margin:10rem 1rem;text-align:center;font-size:2rem}.arrow-left[_ngcontent-%COMP%]{position:absolute;left:10px;top:42%;transform:rotate(180deg)}.arrow-right[_ngcontent-%COMP%]{position:absolute;right:10px;top:42%}.bubbles[_ngcontent-%COMP%]{display:flex;justify-content:center;width:50%;margin:1rem auto}.bubble[_ngcontent-%COMP%]{width:5px;height:5px;margin:0 .5rem;border:1px solid black;border-radius:10px}.active[_ngcontent-%COMP%]{background:black}"]})}return r})()}}]);