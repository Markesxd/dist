"use strict";(self.webpackChunktpwp=self.webpackChunktpwp||[]).push([[106],{2106:(P,u,a)=>{a.r(u),a.d(u,{FoodComponent:()=>y});var m=a(6814),e=a(9468),r=a(95);class g{createFromForm(s){this.nome=s.get("name")?.value??"",this.refeicoes=s.get("meals")?.value??[],this.gatos=s.get("cats")?.value??[]}}class p{}var h=a(6933),_=a(2187),l=a(2746);function f(i,s){if(1&i){const t=e.EpF();e.O4$(),e.TgZ(0,"svg",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onDelete())}),e._UZ(1,"path",18),e.qZA()}}function v(i,s){if(1&i){const t=e.EpF();e.O4$(),e.TgZ(0,"svg",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,c=e.oxw();return e.KtG(c.removeMeal(o))}),e._UZ(1,"path",20),e.qZA()}}function C(i,s){if(1&i&&(e.TgZ(0,"div",19)(1,"span"),e._uU(2),e.qZA(),e.YNc(3,v,2,0,"svg",9),e.qZA()),2&i){const t=s.$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.nome),e.xp6(1),e.Q6J("ngIf",n.isNew)}}function b(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e._UZ(1,"input",21),e.O4$(),e.TgZ(2,"svg",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addMeal())}),e._UZ(3,"path",23),e.qZA()()}}function w(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"input",25),e.NdJ("change",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.onChangeCat(o))}),e.qZA(),e.TgZ(2,"label",26),e._uU(3),e.qZA()()}if(2&i){const t=s.$implicit;e.xp6(1),e.MGl("id","i",t.id,""),e.Q6J("value",t.id),e.xp6(1),e.MGl("for","i",t.id,""),e.xp6(1),e.Oqu(t.nome)}}let x=(()=>{class i{constructor(t,n,o,c){this.fb=t,this.catService=n,this.activeModal=o,this.modalService=c,this.isNew=!0,this.delete=new e.vpe,this.editForm=this.fb.group({name:["",[r.kI.required]],meals:[[],[r.kI.required]],meal:"",cats:[[]]})}ngOnInit(){this.catService.get().subscribe(t=>{this.cats=t.body})}catchKeyPress(t){t.preventDefault(),this.addMeal()}addMeal(){const t=new p;t.nome=this.editForm.get("meal")?.value??void 0,t.nome&&(this.pushMeal(t),this.editForm.patchValue({meal:""}))}onDelete(){const t=this.modalService.open(h.Y,{centered:!0});t.componentInstance.text="Voc\xea tem certeza que quer excluir este Plano Alimentar?",t.closed.subscribe(()=>{this.delete.emit(),this.dismiss()})}onChangeCat(t){const n=t.target;if(null===n)return;const o=Number(n.value),c=this.getCatById(o);c&&(n.checked?this.pushCat(c):this.removeCat(c))}onSubmit(){const t=new g;t.createFromForm(this.editForm),this.activeModal.close(t)}dismiss(){this.activeModal.dismiss()}get meals(){const t=this.editForm.get("meals")?.value;if(!Array.isArray(t))throw new Error("meals is not array!");return t}get formCats(){const t=this.editForm.get("cats")?.value;if(!Array.isArray(t))throw new Error("Cats is not an array!");return t}getCatById(t){return this.cats?.find(n=>n.id===t)}pushMeal(t){const n=this.meals;n.push(t),this.editForm.patchValue({meals:n})}removeMeal(t){this.editForm.patchValue({meals:this.meals.filter(o=>o!==t)})}pushCat(t){const n=this.formCats;n.push(t),this.editForm.patchValue({cats:n})}removeCat(t){this.editForm.patchValue({cats:this.formCats.filter(o=>o.id!==t.id)})}checkOldCats(t){t.forEach(n=>{this.checkOldcat(n)})}checkOldcat(t){const n=document.querySelector(`#i${t.id}`);n?n.checked=!0:setTimeout(()=>this.checkOldcat(t),100)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(r.qu),e.Y36(_.q),e.Y36(l.Kz),e.Y36(l.FF))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["create-plan"]],inputs:{isNew:"isNew"},outputs:{delete:"delete"},standalone:!0,features:[e.jDz],decls:25,vars:7,consts:[[1,"p-3"],[1,"form-header"],[1,"form-title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 384 512",1,"form-icon",3,"click"],["d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"],[3,"formGroup","ngSubmit","keydown.enter"],["for","name",1,"form-label"],[1,"d-flex","align-items-center","gap-2"],["type","text","id","name","formControlName","name",1,"form-control"],["xmlns","http://www.w3.org/2000/svg","height","1em","viewBox","0 0 448 512",3,"click",4,"ngIf"],["for","meal",1,"form-label"],[1,"addup-area"],["class","addup-cell",4,"ngFor","ngForOf"],["class","addup-cell",4,"ngIf"],["for","cats",1,"form-label"],["class","form-check",4,"ngFor","ngForOf"],["type","submit",1,"form-buttom",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","height","1em","viewBox","0 0 448 512",3,"click"],["d","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"],[1,"addup-cell"],["d","M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"],["type","text","name","meal","id","meal","formControlName","meal",1,"form-control"],["xmlns","http://www.w3.org/2000/svg","height","1rem","viewBox","0 0 512 512",3,"click"],["d","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"id","value","change"],[1,"mt-1",3,"for"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3),e.qZA(),e.O4$(),e.TgZ(4,"svg",3),e.NdJ("click",function(){return o.dismiss()}),e._UZ(5,"path",4),e.qZA()(),e.kcU(),e.TgZ(6,"form",5),e.NdJ("ngSubmit",function(){return o.onSubmit()})("keydown.enter",function(d){return o.catchKeyPress(d)}),e.TgZ(7,"div")(8,"label",6),e._uU(9,"Nome"),e.qZA(),e.TgZ(10,"div",7),e._UZ(11,"input",8),e.YNc(12,f,2,0,"svg",9),e.qZA()(),e.TgZ(13,"div")(14,"label",10),e._uU(15,"Refei\xe7\xf5es"),e.qZA(),e.TgZ(16,"div",11),e.YNc(17,C,4,2,"div",12),e.qZA(),e.YNc(18,b,4,0,"div",13),e.qZA(),e.TgZ(19,"div")(20,"label",14),e._uU(21,"gatos"),e.qZA(),e.YNc(22,w,4,4,"div",15),e.qZA(),e.TgZ(23,"button",16),e._uU(24,"Salvar"),e.qZA()()()),2&n&&(e.xp6(3),e.hij("",o.isNew?"Novo":""," Plano"),e.xp6(3),e.Q6J("formGroup",o.editForm),e.xp6(6),e.Q6J("ngIf",!o.isNew),e.xp6(5),e.Q6J("ngForOf",o.meals),e.xp6(1),e.Q6J("ngIf",o.isNew),e.xp6(4),e.Q6J("ngForOf",o.cats),e.xp6(1),e.Q6J("disabled",!o.editForm.valid))},dependencies:[m.ez,m.sg,m.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:500;display:flex;align-items:center;justify-content:center;width:100vw;height:100vh;overflow:hidden;background-color:#00000040}.modal-body[_ngcontent-%COMP%]{background:white;border-radius:2rem;padding:2rem 1rem}.addup-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2em;margin:.2em 0}.addup-cell[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:.2rem}"]})}return i})();var Z=a(2017);const T=["carousel"];function k(i,s){if(1&i){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",24)(1,"input",25),e.NdJ("change",function(o){e.CHM(t);const c=e.oxw(3);return e.KtG(c.onServingMeal(o))}),e.qZA(),e.TgZ(2,"label",26),e._uU(3),e.qZA()()}if(2&i){const t=s.$implicit;e.xp6(1),e.MGl("id","meal",t.id,""),e.Q6J("checked",t.foiServida)("value",t.id),e.xp6(1),e.MGl("for","meal",t.id,""),e.xp6(1),e.Oqu(t.nome)}}function F(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16)(2,"h3",17),e._uU(3),e.qZA(),e.O4$(),e.TgZ(4,"svg",18),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,c=e.oxw();return e.KtG(c.openModal(o))}),e._UZ(5,"path",19),e.qZA()(),e.YNc(6,k,4,5,"div",20),e.kcU(),e.TgZ(7,"div",21),e.O4$(),e.TgZ(8,"svg",22),e._UZ(9,"path",23),e.qZA()()()}if(2&i){const t=e.oxw(),n=t.index,o=t.$implicit,c=e.oxw();e.Q6J("id",n),e.xp6(3),e.Oqu(o.nome),e.xp6(3),e.Q6J("ngForOf",o.refeicoes),e.xp6(2),e.Q6J("ngbPopover",c.getGats(o))}}function M(i,s){1&i&&e.YNc(0,F,10,4,"ng-template",14)}const O=function(i){return{active:i}};function N(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onBubbleClick())}),e.qZA(),e.BQk()}if(2&i){const t=s.index,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(1,O,t===n.currentCard))}}let y=(()=>{class i{constructor(t,n){this.planService=t,this.modalService=n,this.plans=[],this._currentCard=0,this.touchStartX=null}onTouchStart(t){this.touchStartX=t.changedTouches[0].clientX}onTouchEnd(t){if(null===this.touchStartX)return;const n=t.changedTouches[0].clientX-this.touchStartX;Math.abs(n)<10||(n<0?this.onNextCard():this.onPreviousCard())}updateBubble(t){this.currentCard=Number(t.current.split("-")[2])}ngOnInit(){this.load()}openModal(t){const n=this.modalService.open(x,{centered:!0});if(t)return n.componentInstance.isNew=!1,n.componentInstance.editForm.patchValue({name:t.nome,cats:t.gatos}),n.componentInstance.checkOldCats(t.gatos),t.refeicoes?.forEach(o=>{n.componentInstance.pushMeal(o)}),n.closed.subscribe(o=>(o.id=t.id,this.planService.put(o).subscribe(()=>this.load()))),void n.componentInstance.delete.subscribe(()=>{this.planService.delete(t).subscribe(()=>{this.load()})});n.closed.subscribe(o=>{this.planService.post(o).subscribe(()=>this.load())})}deletePlan(t){this.planService.delete(t).subscribe(),this.load()}onPreviousCard(){this.currentCard--,this.carousel.prev()}onNextCard(){this.currentCard++,this.carousel.next()}onBubbleClick(){this.carousel.select("slide-ngb-slide-"+this.currentCard)}onServingMeal(t){const n=new p;n.id=Number(t.target.value),n.foiServida=t.target?.checked,this.planService.serve(n).subscribe()}getGats(t){return t.gatos&&0!==t.gatos.length?t.gatos?.map(n=>n.nome).join(", "):"sem gatos"}get currentCard(){return this._currentCard}set currentCard(t){t<0||t>this.plans.length-1||(this._currentCard=t)}load(){this.planService.fetch().subscribe(t=>{this.plans=t})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(Z.D),e.Y36(l.FF))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-food"]],viewQuery:function(n,o){if(1&n&&e.Gf(T,5),2&n){let c;e.iGM(c=e.CRH())&&(o.carousel=c.first)}},standalone:!0,features:[e.jDz],decls:18,vars:5,consts:[[1,"food"],[1,"page-header"],[1,"page-title"],["xmlns","http://www.w3.org/2000/svg","height","1rem","viewBox","0 0 512 512",3,"click"],["d","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"],[3,"touchstart","touchend"],[1,"mt-5",3,"wrap","showNavigationArrows","interval","slide"],["carousel",""],[4,"ngFor","ngForOf"],[1,"arrow-left",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","1em","viewBox","0 0 320 512"],["d","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"],[1,"arrow-right",3,"click"],[1,"bubbles"],["ngbSlide",""],[1,"card","d-flex","gap-3","justify-content-evenly",3,"id"],[1,"d-flex","align-items-center","justify-content-between"],[1,"card-title"],["xmlns","http://www.w3.org/2000/svg","height","1em","viewBox","0 0 512 512",3,"click"],["d","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"],["class","card-field",4,"ngFor","ngForOf"],[1,"align-self-end","mt-3"],["placement","start","height","1.2rem","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512",3,"ngbPopover"],["d","M269.4 2.9C265.2 1 260.7 0 256 0s-9.2 1-13.4 2.9L54.3 82.8c-22 9.3-38.4 31-38.3 57.2c.5 99.2 41.3 280.7 213.6 363.2c16.7 8 36.1 8 52.8 0C454.7 420.7 495.5 239.2 496 140c.1-26.2-16.3-47.9-38.3-57.2L269.4 2.9zM160 154.4c0-5.8 4.7-10.4 10.4-10.4h.2c3.4 0 6.5 1.6 8.5 4.3l40 53.3c3 4 7.8 6.4 12.8 6.4h48c5 0 9.8-2.4 12.8-6.4l40-53.3c2-2.7 5.2-4.3 8.5-4.3h.2c5.8 0 10.4 4.7 10.4 10.4V272c0 53-43 96-96 96s-96-43-96-96V154.4zM216 288a16 16 0 1 0 0-32 16 16 0 1 0 0 32zm96-16a16 16 0 1 0 -32 0 16 16 0 1 0 32 0z"],[1,"card-field"],["type","checkbox",1,"card-checkbox",3,"id","checked","value","change"],[1,"card-checkbox-label",3,"for"],[1,"bubble",3,"ngClass","click"]],template:function(n,o){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h3",2),e._uU(3,"Alimenta\xe7\xe3o"),e.qZA(),e.O4$(),e.TgZ(4,"svg",3),e.NdJ("click",function(){return o.openModal()}),e._UZ(5,"path",4),e.qZA()(),e.kcU(),e.TgZ(6,"div",5),e.NdJ("touchstart",function(d){return o.onTouchStart(d)})("touchend",function(d){return o.onTouchEnd(d)}),e.TgZ(7,"ngb-carousel",6,7),e.NdJ("slide",function(d){return o.updateBubble(d)}),e.YNc(9,M,1,0,null,8),e.qZA()(),e.TgZ(10,"span",9),e.NdJ("click",function(){return o.onPreviousCard()}),e.O4$(),e.TgZ(11,"svg",10),e._UZ(12,"path",11),e.qZA()(),e.kcU(),e.TgZ(13,"span",12),e.NdJ("click",function(){return o.onNextCard()}),e.O4$(),e.TgZ(14,"svg",10),e._UZ(15,"path",11),e.qZA()(),e.kcU(),e.TgZ(16,"div",13),e.YNc(17,N,2,3,"ng-container",8),e.qZA()()),2&n&&(e.xp6(7),e.Q6J("wrap",!1)("showNavigationArrows",!1)("interval",0),e.xp6(2),e.Q6J("ngForOf",o.plans),e.xp6(8),e.Q6J("ngForOf",o.plans))},dependencies:[m.ez,m.mk,m.sg,l.IJ,l.uo,l.xl,l.o8,l.mH],styles:[".food[_ngcontent-%COMP%]{height:100%;width:100%}.card[_ngcontent-%COMP%]{padding:1rem 2rem;margin:1rem 2rem;min-height:50%;border:1px solid black;border-radius:1rem}.card-title[_ngcontent-%COMP%]{font-size:2.5rem;text-align:center}.card-field[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.2rem}.card-checkbox[_ngcontent-%COMP%]{height:1.5rem;width:1.5rem}.card-checkbox-label[_ngcontent-%COMP%]{font-size:1.5rem}.arrow-left[_ngcontent-%COMP%]{position:absolute;left:10px;top:42%;transform:rotate(180deg)}.arrow-right[_ngcontent-%COMP%]{position:absolute;right:10px;top:42%}.bubbles[_ngcontent-%COMP%]{display:flex;justify-content:center;width:50%;margin:1rem auto}.bubble[_ngcontent-%COMP%]{width:5px;height:5px;margin:0 .5rem;border:1px solid black;border-radius:10px}.active[_ngcontent-%COMP%]{background:black}"]})}return i})()}}]);